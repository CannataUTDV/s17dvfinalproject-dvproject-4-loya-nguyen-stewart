require("jsonlite")
require("RCurl")
require("ggplot2")
dff <- data.frame(fromJSON(getURL(URLencode(gsub("\n", " ",
'oraclerest.cs.utexas.edu:5048/rest/native/?query="SELECT * FROM `fatal-police-shootings-data` LIMIT 100;"')),
httpheader=c(DB='jdbc:data:world:sql:exsorest:s-17-edv-project-2',
USER='nguyentb95',
PASS='eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJhZ2VudDpuZ3V5ZW50Yjk1Ojo3Y2E3NTY0OC1iNjY2LTRhOTctOGExMi02ZWVhYmNiOWYzZTkiLCJpYXQiOjE0ODQ2OTcyODcsInN1YiI6InByb2QtdXNlci1jbGllbnQ6bmd1eWVudGI5NSIsInJvbGUiOlsidXNlcl9hcGlfd3JpdGUiLCJ1c2VyX2FwaV9yZWFkIl0sImdlbmVyYWwtcHVycG9zZSI6dHJ1ZX0.JmLzD3jkAl7NhhZ94rUaoJ9DqwSyaa8XxmP1ctczumMi9xU0vV97J8EZsl6VDCQ7T_keyfVNWknK3FzV9wT6IQ',
MODE='native_mode', MODEL='model',
returnDimensions = 'False', returnFor = 'JSON'), verbose = FALSE), ))
p1<- ggplot(dff) + geom_point(aes(x = armed, y = age, color = armed)) + labs(title=' Age and Weapon Use When Shot by Police')
p2<- ggplot(dff) + geom_dotplot(aes(x=age, fill = gender))+ labs(title='Age and Gender at Death by Police')
p3<- ggplot(dff) + geom_bin2d(aes(x=dff$race, y = dff$state))+ labs(title='Race by State at Death by Police')
p4<- ggplot(dff) + geom_bar(aes(x=flee, fill = armed))+ labs(title=' Weapons Used When Fleeing')
require("grid")
png("fatalPoliceShootingsPlots.png", width = 25, height = 20, units = "in", res = 72)
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
# Print Plots
print(p1, vp = viewport(layout.pos.row = 1, layout.pos.col = 1))
print(p2, vp = viewport(layout.pos.row = 1, layout.pos.col = 2))
print(p3, vp = viewport(layout.pos.row = 2, layout.pos.col = 1))
print(p4, vp = viewport(layout.pos.row = 2, layout.pos.col = 2))
dev.off()
shiny::runApp()
install.packages(plotly)
install.packages('plotly')
runApp()
runApp()
runApp()
runApp()
runApp('~/s17dvproject6-dvproject-4-loya-nguyen-stewart/02 Shiny')
runApp()
runApp()
runApp()
require(ggplot2)
require(dplyr)
income <- read.csv(file="../01 Data/income.csv", header=TRUE, sep=",")
fatalPoliceShootings <- read.csv(file="../01 Data/fatalPoliceShootings.csv", header=TRUE, sep=",")
incomeOfTheFatallyShot <- read.csv(file="../01 Data/incomeOfTheFatallyShot.csv", header=TRUE, sep=",")
# First Plot
genderMentalIll <- dplyr::select(incomeOfTheFatallyShot, Per_Capita_Income, gender, signs_of_mental_illness)
countTotal <- genderMentalIll %>% mutate(Per_Capita_Range = ifelse(Per_Capita_Income < 26500, "low", ifelse(Per_Capita_Income < 31000 & Per_Capita_Income > 26500, "medium","high"))) %>% count(Per_Capita_Range,gender, signs_of_mental_illness)
lowCapitaRange <- countTotal %>% filter(Per_Capita_Range == "low")
mediumCapitaRange <- countTotal %>% filter(Per_Capita_Range == "medium")
highCapitaRange <- countTotal %>% filter(Per_Capita_Range == "high")
capitaRangePlot <- ggplot() +
geom_text(data = lowCapitaRange, aes(x=gender, y=signs_of_mental_illness, label = n),nudge_x = -0.2, size=10) +
geom_text(data = mediumCapitaRange, aes(x=gender, y=signs_of_mental_illness, label = n),nudge_x = 0, size=10) +
geom_text(data = highCapitaRange, aes(x=gender, y=signs_of_mental_illness, label = n),nudge_x = 0.2, size=10)
# Second Plot
plotDF <- dplyr::inner_join(income, fatalPoliceShootings, by = c("State" = "state")) %>%
dplyr::group_by(gender, race) %>%
dplyr::summarize(avg_median_income = mean(Median_Income))
subset <- dplyr::inner_join(income,fatalPoliceShootings, by = c("State" = "state")) %>% dplyr::filter(Median_Income >= 46000 & Median_Income <= 62000) %>%
dplyr::group_by(gender, race) %>%
dplyr::summarize(avg_median_income = mean(Median_Income))
genderRacePlot <- ggplot() +
geom_text(data = plotDF, aes(x= gender, y=race, label = avg_median_income), size=10) +
geom_text(data = subset, aes(x=gender, y=race, label = avg_median_income), nudge_y = -.5, size=4)
#Third Plot
test <- incomeOfTheFatallyShot %>% dplyr::group_by(race,flee) %>% dplyr::summarise(income = median(Median_Income), MedianFamilyIncomePerCapitaIncomeRatio = median(Median_Family_Income/Per_Capita_Income))
raceFleePlot <- ggplot(test) +
theme(axis.text.x=element_text(angle=90, size=16, vjust=0.5)) +
theme(axis.text.y=element_text(size=16, hjust=0.5)) +
geom_text(aes(x=race, y=flee, label = income), size=6)+
geom_tile(aes(x=race, y=flee, fill=MedianFamilyIncomePerCapitaIncomeRatio), alpha=0.50)
require("grid")
png("crossTabPlots.png", width = 45, height = 45, units = "in", res = 120)
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
# Print Plots
print(capitaRangePlot, vp = viewport(layout.pos.row = 1, layout.pos.col = 1))
print(genderRacePlot, vp = viewport(layout.pos.row = 1, layout.pos.col = 2))
print(raceFleePlot, vp = viewport(layout.pos.row = 2, layout.pos.col = 1))
dev.off()
income <- read.csv(file="../01 Data/income.csv", header=TRUE, sep=",")
fatalPoliceShootings <- read.csv(file="../01 Data/fatalPoliceShootings.csv", header=TRUE, sep=",")
incomeOfTheFatallyShot <- read.csv(file="../01 Data/incomeOfTheFatallyShot.csv", header=TRUE, sep=",")
# First Plot
genderMentalIll <- dplyr::select(incomeOfTheFatallyShot, Per_Capita_Income, gender, signs_of_mental_illness)
countTotal <- genderMentalIll %>% mutate(Per_Capita_Range = ifelse(Per_Capita_Income < 26500, "low", ifelse(Per_Capita_Income < 31000 & Per_Capita_Income > 26500, "medium","high"))) %>% count(Per_Capita_Range,gender, signs_of_mental_illness)
lowCapitaRange <- countTotal %>% filter(Per_Capita_Range == "low")
mediumCapitaRange <- countTotal %>% filter(Per_Capita_Range == "medium")
highCapitaRange <- countTotal %>% filter(Per_Capita_Range == "high")
income <- read.csv(file="../01 Data/income.csv", header=TRUE, sep=",")
fatalPoliceShootings <- read.csv(file="../01 Data/fatalPoliceShootings.csv", header=TRUE, sep=",")
incomeOfTheFatallyShot <- read.csv(file="../01 Data/incomeOfTheFatallyShot.csv", header=TRUE, sep=",")
shiny::runApp()
runApp()
runApp()
runApp('~/s17dvproject5-dvproject-4-loya-nguyen-stewart/02 Shiny')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
connection <- data.world(token = "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwcm9kLXVzZXItY2xpZW50OmV4c29yZXN0IiwiaXNzIjoiYWdlbnQ6ZXhzb3Jlc3Q6OmY5ODk0YTlhLWZkNjAtNDI2NC04YTk3LTlhYjUwOWYzODZiZSIsImlhdCI6MTQ4NDY5NzMzNiwicm9sZSI6WyJ1c2VyX2FwaV93cml0ZSIsInVzZXJfYXBpX3JlYWQiXSwiZ2VuZXJhbC1wdXJwb3NlIjp0cnVlfQ.WLINQ3z7bGjvYCmpDR3Fvl3LZ4fFDLBDCngivFE3nfoF1EgGQQ0WCxZElC2bxC3YUoUiYEJ6hz8rxVW3yHoecg")
states <- query(connection,dataset="robin-stewart/s-17-dv-project-6", type="sql",
query="SELECT distinct `fatal-police-shootings-cleaned`.state
FROM `fatal-police-shootings-cleaned.csv/fatal-police-shootings-cleaned`
order by 1"
)
stateSelectList <- as.list(states$state)
income <- query(connection,
dataset="uscensusbureau/acs-2015-5-e-income", type="sql",
query="select State, B19083_001 as GINI, B19301_001 as Per_Capita_Income, B19113_001 as Median_Family_Income, B19202_001 as Median_Non_Family_Income, B19019_001 as Median_Income
from `USA_All_States`
order by Median_Income
limit 1000")
fatalPoliceShootings <- query(connection,
dataset="robin-stewart/s-17-dv-final-project", type="sql",
query="SELECT * FROM `fatal-police-shootings-cleaned.csv/fatal-police-shootings-cleaned` LIMIT 1000"
)
incomeOfTheFatallyShot <- dplyr::inner_join(income,fatalPoliceShootings, by = c("State" = "state"))
require(ggplot2)
require(dplyr)
require(shiny)
require(shinydashboard)
require(data.world)
require(readr)
require(DT)
require(plotly)
connection <- data.world(token = "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwcm9kLXVzZXItY2xpZW50OmV4c29yZXN0IiwiaXNzIjoiYWdlbnQ6ZXhzb3Jlc3Q6OmY5ODk0YTlhLWZkNjAtNDI2NC04YTk3LTlhYjUwOWYzODZiZSIsImlhdCI6MTQ4NDY5NzMzNiwicm9sZSI6WyJ1c2VyX2FwaV93cml0ZSIsInVzZXJfYXBpX3JlYWQiXSwiZ2VuZXJhbC1wdXJwb3NlIjp0cnVlfQ.WLINQ3z7bGjvYCmpDR3Fvl3LZ4fFDLBDCngivFE3nfoF1EgGQQ0WCxZElC2bxC3YUoUiYEJ6hz8rxVW3yHoecg")
states <- query(connection,dataset="robin-stewart/s-17-dv-project-6", type="sql",
query="SELECT distinct `fatal-police-shootings-cleaned`.state
FROM `fatal-police-shootings-cleaned.csv/fatal-police-shootings-cleaned`
order by 1"
)
stateSelectList <- as.list(states$state)
income <- query(connection,
dataset="uscensusbureau/acs-2015-5-e-income", type="sql",
query="select State, B19083_001 as GINI, B19301_001 as Per_Capita_Income, B19113_001 as Median_Family_Income, B19202_001 as Median_Non_Family_Income, B19019_001 as Median_Income
from `USA_All_States`
order by Median_Income
limit 1000")
fatalPoliceShootings <- query(connection,
dataset="robin-stewart/s-17-dv-final-project", type="sql",
query="SELECT * FROM `fatal-police-shootings-cleaned.csv/fatal-police-shootings-cleaned` LIMIT 1000"
)
incomeOfTheFatallyShot <- dplyr::inner_join(income,fatalPoliceShootings, by = c("State" = "state"))
boxData <- eventReactive(input$clickBox, {
boxDataSet <- incomeOfTheFatallyShot
})
ggplot(boxData()) +
gemo_boxplot(x=flee, y = Median_Family_Income)
ggplot(incomeOfTheFatallyShot) +
gemo_boxplot(x=flee, y = Median_Family_Income)
ggplot(incomeOfTheFatallyShot) +
geom_boxplot(x=flee, y = Median_Family_Income)
head(incomeOfTheFatallyShot)
incomeOfTheFatallyShot$flee
ggplot() +
geom_boxplot(sdata = incomeOfTheFatallyShot, x=flee, y = Median_Family_Income)
ggplot() +
geom_boxplot(sdata = incomeOfTheFatallyShot, x=incomeOfTheFatallyShot$flee, y = Median_Family_Income)
ggplot() +
geom_boxplot(sdata = incomeOfTheFatallyShot, x=incomeOfTheFatallyShot$flee, y = incomeOfTheFatallyShot$Median_Family_Income)
ggplot() +
geom_boxplot(data = incomeOfTheFatallyShot, x=flee, y = Median_Family_Income)
ggplot() +
geom_boxplot(aes(data = incomeOfTheFatallyShot, x=flee, y = Median_Family_Income)  )
ggplot() +
geom_boxplot(aes(data = incomeOfTheFatallyShot, x = flee, y = Median_Family_Income)  )
ggplot() +
geom_boxplot(aes(data = incomeOfTheFatallyShot, x = incomeOfTheFatallyShot$flee, y = incomeOfTheFatallyShot$Median_Family_Income)  )
incomeOfTheFatallyShot$flee
incomeOfTheFatallyShot$Median_Family_Income
runApp()
runApp()
runApp()
